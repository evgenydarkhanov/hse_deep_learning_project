## retrievers
Директория с материалами по поисковикам. Все файлы загружены локально, поэтому пути в файловой системе могут меняться. Ищем наиболее близкие к запросу документы из базы знаний. Реализовано в формате MVP, поэтому поиск может работать неоптимально. Индекс - индекс в датафрейме; код услуги - код услуги из базы данных (например, "ДОКУМЕНТ01"); Скор - значение релевантности документа запросу, находящееся в диапазоне (0, 1)

- `retrievers.ipynb`

Ноутбук с имплементациями нескольких вариантов поисковиков. Ищем наиболее релевантные запросу документы из базы знаний

- `hybrid_retrieve_v_1.0.ipynb`

Гибридный поиск, который работает на: асимметричном поиске, поиске по bm25 и по косинусному сходству. Для получения итоговых скоров индексов используется взвешенная сумма скоров нескольких поисковиков

- ~`hybrid_retrieve_v_1.1.ipynb`~ - можно не смотреть, реализовано не то, что нужно и не так, как нужно
- `hybrid_retrieve_v_1.2.ipynb`

Взвешивание результатов поисковиков теперь работает с произвольным количеством аргументов. В гибридном поиске добавлен выбор между: (взвешенная сумма + топ-N) и (взвешенная сумма + max pooling + топ-N). Под max pooling подразумевается взятие индекса с наибольшим скором, если есть несколько индексов с одинаковыми кодами услуг

- `hybrid_retrieve_v_1.3.ipynb`

Объединение результатов работы поисковиков модернизировано: `scores_merging_weighted_sum` и `scores_merging_unique_id` объединены в функцию `scores_merging`. Добавлена нижняя граница релевантности `threshold`, если скор меньше `threshold`, то индекс не попадает в выдачу

- `hybrid_retrieve_v_1.4.ipynb`

Эмбеддер ~`rubert_tiny2`~ от Давида Дале заменён на `rubert_base` от ai-forever

- `hybrid_retrieve_v_1.5.ipynb`

    - эмбеддер заменён на `USER_bge_m3` от vkdeep
    - при `pooling=True` возвращаются `[(DataFrame index, (score,)), ...]`
    - при `pooling=False` возвращаются `[(КОД УСЛУГИ, (score, DataFrame index)), ...]`
